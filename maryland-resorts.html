<!-- Apple-Style Ski Dining UI - Maryland Ski Resorts Page -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maryland Ski Resorts - SNOGRUB</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Discover Maryland's ski resorts. Find the best dining options at Wisp Resort and other ski destinations in Maryland.">
    <meta name="keywords" content="Maryland ski resorts, Wisp Resort, Deep Creek Lake skiing, Maryland skiing, ski resorts Maryland">
    
    <!-- Structured Data (JSON-LD) for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "Maryland Ski Resorts - SNOGRUB",
        "description": "Discover ski resorts in Maryland with dining information",
        "url": "https://snogrub.com/maryland-resorts.html"
    }
    </script>
    
    <!-- TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent-blue: #0071e3;
            --accent-light: #5ac8fa;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .frosted-glass {
            background: rgba(251, 251, 253, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
        }
        
        * {
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .resort-card {
            transition: all 0.3s ease;
        }
        
        .resort-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.1);
        }
        
        .winter-gradient {
            background: linear-gradient(to bottom, #f0f8ff 0%, #ffffff 100%);
        }
        
        .stat-card {
            transform: translateY(0);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
        }
        
        /* Animation for stat numbers */
        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #totalResortsValue,
        #totalRestaurantsValue,
        #totalAcresValue,
        #totalLiftsValue {
            animation: countUp 0.6s ease-out;
        }
        
        /* Ensure SVG animations are smooth */
        svg {
            shape-rendering: geometricPrecision;
        }
        
        /* Favorites button styling for resort cards */
        .favorite-button {
            transition: all 0.2s ease;
        }
        
        .favorite-button:hover svg {
            transform: scale(1.1);
        }
        
        .favorite-button.favorited svg {
            animation: favoritePulse 0.3s ease;
        }
        
        @keyframes favoritePulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }
        
        /* Logo overlay container - hidden by default */
        .resort-logo-overlay-container {
            display: none !important;
        }
        
        .resort-logo-overlay-container[style*="flex"] {
            display: flex !important;
        }
    </style>
</head>
<body class="bg-white text-gray-900 antialiased">
    
    <!-- Navigation Bar -->
    <nav class="fixed top-0 left-0 right-0 z-50 frosted-glass border-b border-gray-200/50">
        <div class="max-w-7xl mx-auto px-6 sm:px-8">
            <div class="flex items-center justify-between h-14">
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-2xl font-semibold hover:opacity-80 transition-opacity duration-300">
                        <span class="bg-[var(--accent-blue)] text-white px-1">SNO</span><span class="text-[var(--accent-blue)]">GRUB</span>
                    </a>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="resorts.html" class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        Resorts
                    </a>
                    <a href="restaurants.html" class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        Restaurants
                    </a>
                    <a href="map.html" class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        Map
                    </a>
                    <a href="blog.html" class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        Blog
                    </a>
                    <a href="favorites.html" class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        Favorites
                    </a>
                    <a href="trips.html" class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        Trips
                    </a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobileMenuButton" class="md:hidden text-gray-600 hover:text-gray-900 transition-colors" aria-label="Menu">
                    <svg id="menuIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                    <svg id="closeIcon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Mobile Menu Dropdown -->
            <div id="mobileMenu" class="hidden md:hidden border-t border-gray-200/50 bg-white/95 backdrop-blur-lg">
                <div class="px-6 py-4 space-y-4">
                    <a href="resorts.html" class="block text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">Resorts</a>
                    <a href="restaurants.html" class="block text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">Restaurants</a>
                    <a href="map.html" class="block text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">Map</a>
                    <a href="blog.html" class="block text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">Blog</a>
                    <a href="favorites.html" class="block text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">Favorites</a>
                    <a href="trips.html" class="block text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-200">Trips</a>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Breadcrumb -->
    <div class="pt-20 pb-4 px-6 sm:px-8 bg-gray-50">
        <div class="max-w-7xl mx-auto">
            <nav class="flex items-center space-x-2 text-sm text-gray-600">
                <a href="index.html" class="hover:text-gray-900 transition-colors">Home</a>
                <span>/</span>
                <a href="resorts.html" class="hover:text-gray-900 transition-colors">Resorts</a>
                <span>/</span>
                <span class="text-gray-900">Maryland</span>
            </nav>
        </div>
    </div>
    
    <!-- Hero Stats Section -->
    <section id="heroStatsSection" class="py-12 md:py-16 bg-gradient-to-br from-blue-50 via-white to-cyan-50">
        <div class="max-w-7xl mx-auto px-6 sm:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
                <!-- Total Resorts Stat -->
                <div class="stat-card bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex flex-col items-center">
                        <div class="mb-4 w-full h-32 flex items-center justify-center">
                            <svg id="resortsGraphic" class="w-full h-full" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg">
                                <!-- Mountain peaks -->
                                <path d="M 20 100 L 20 60 L 40 50 L 60 60 L 60 100 Z" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
                                <path d="M 70 100 L 70 40 L 100 30 L 130 40 L 130 100 Z" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
                                <path d="M 140 100 L 140 50 L 160 45 L 180 50 L 180 100 Z" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
                                <!-- Snow on peaks -->
                                <path d="M 30 60 L 40 50 L 50 60" stroke="#ffffff" stroke-width="2" fill="none"/>
                                <path d="M 80 40 L 100 30 L 120 40" stroke="#ffffff" stroke-width="2" fill="none"/>
                                <path d="M 150 50 L 160 45 L 170 50" stroke="#ffffff" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <div class="text-center">
                            <div id="totalResortsValue" class="text-3xl md:text-4xl font-bold text-gray-900 mb-1">0</div>
                            <div class="text-sm text-gray-600 font-medium">Resorts</div>
                        </div>
                    </div>
                </div>

                <!-- Total Restaurants Stat -->
                <div class="stat-card bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex flex-col items-center">
                        <div class="mb-4 w-full h-32 flex items-center justify-center">
                            <svg id="restaurantsGraphic" class="w-full h-full" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg">
                                <!-- Restaurant building 1 -->
                                <rect x="20" y="60" width="30" height="40" fill="#0ea5e9" rx="2"/>
                                <rect x="25" y="70" width="8" height="8" fill="#fbbf24"/>
                                <rect x="37" y="70" width="8" height="8" fill="#fbbf24"/>
                                <!-- Restaurant building 2 -->
                                <rect x="70" y="50" width="30" height="50" fill="#0ea5e9" rx="2">
                                    <animate attributeName="fill" values="#0ea5e9;#fbbf24;#0ea5e9" dur="2s" repeatCount="indefinite"/>
                                </rect>
                                <rect x="75" y="60" width="8" height="8" fill="#fbbf24"/>
                                <rect x="87" y="60" width="8" height="8" fill="#fbbf24"/>
                                <!-- Restaurant building 3 -->
                                <rect x="120" y="55" width="30" height="45" fill="#0ea5e9" rx="2"/>
                                <rect x="125" y="65" width="8" height="8" fill="#fbbf24"/>
                                <rect x="137" y="65" width="8" height="8" fill="#fbbf24"/>
                                <!-- Animated fork and knife -->
                                <g id="utensils" transform="translate(100, 30)">
                                    <path d="M 0 0 L 0 20 M -3 5 L 3 5 M -2 10 L 2 10" stroke="#ef4444" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M 8 0 L 8 20 M 5 8 L 11 8" stroke="#ef4444" stroke-width="2" stroke-linecap="round"/>
                                    <animateTransform attributeName="transform" type="translate" values="100,30; 100,20; 100,30" dur="1.5s" repeatCount="indefinite"/>
                                </g>
                                <!-- Floating food icons -->
                                <circle cx="50" cy="40" r="3" fill="#fbbf24" opacity="0.7">
                                    <animate attributeName="cy" values="40;30;40" dur="2s" repeatCount="indefinite"/>
                                    <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite"/>
                                </circle>
                                <circle cx="150" cy="45" r="3" fill="#fbbf24" opacity="0.7">
                                    <animate attributeName="cy" values="45;35;45" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                                    <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                                </circle>
                            </svg>
                        </div>
                        <div class="text-center">
                            <div id="totalRestaurantsValue" class="text-3xl md:text-4xl font-bold text-gray-900 mb-1">0</div>
                            <div class="text-sm text-gray-600 font-medium">Restaurants</div>
                        </div>
                    </div>
                </div>

                <!-- Total Terrain Stat -->
                <div class="stat-card bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex flex-col items-center">
                        <div class="mb-4 w-full h-32 flex items-center justify-center">
                            <svg id="terrainGraphic" class="w-full h-full" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg">
                                <!-- Mountain background -->
                                <path d="M 0 120 L 0 80 L 50 50 L 100 30 L 150 40 L 200 20 L 200 120 Z" fill="#e0f2fe" opacity="0.5"/>
                                <!-- Terrain area indicator -->
                                <path d="M 0 120 L 0 100 L 50 80 L 100 60 L 150 70 L 200 50 L 200 120 Z" fill="#0ea5e9" opacity="0.3"/>
                                <!-- Terrain lines -->
                                <path d="M 20 100 Q 50 70, 80 60" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                                <path d="M 40 100 Q 70 75, 100 65" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                                <path d="M 60 100 Q 90 80, 120 70" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                                <path d="M 80 100 Q 110 85, 140 75" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                                <path d="M 100 100 Q 130 90, 160 80" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                            </svg>
                        </div>
                        <div class="text-center">
                            <div id="totalAcresValue" class="text-3xl md:text-4xl font-bold text-gray-900 mb-1">0</div>
                            <div class="text-sm text-gray-600 font-medium">Acres</div>
                        </div>
                    </div>
                </div>

                <!-- Total Lifts Stat -->
                <div class="stat-card bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex flex-col items-center">
                        <div class="mb-4 w-full h-32 flex items-center justify-center">
                            <svg id="liftsGraphic" class="w-full h-full" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg">
                                <!-- Lift tower 1 -->
                                <line x1="30" y1="100" x2="30" y2="30" stroke="#0ea5e9" stroke-width="3"/>
                                <circle cx="30" cy="30" r="4" fill="#0ea5e9"/>
                                <!-- Lift tower 2 -->
                                <line x1="100" y1="100" x2="100" y2="20" stroke="#0ea5e9" stroke-width="3"/>
                                <circle cx="100" cy="20" r="4" fill="#0ea5e9"/>
                                <!-- Lift tower 3 -->
                                <line x1="170" y1="100" x2="170" y2="30" stroke="#0ea5e9" stroke-width="3"/>
                                <circle cx="170" cy="30" r="4" fill="#0ea5e9"/>
                                <!-- Cable line -->
                                <line x1="30" y1="30" x2="170" y2="30" stroke="#64748b" stroke-width="2" stroke-dasharray="3,3"/>
                                <!-- Animated chair lift -->
                                <g id="liftChair" transform="translate(0, 0)">
                                    <rect x="45" y="25" width="20" height="12" fill="#ef4444" rx="2"/>
                                    <circle cx="50" cy="37" r="3" fill="#1e293b"/>
                                    <circle cx="60" cy="37" r="3" fill="#1e293b"/>
                                    <animateTransform attributeName="transform" type="translate" values="0,0; 140,0; 0,0" dur="3s" repeatCount="indefinite"/>
                                </g>
                            </svg>
                        </div>
                        <div class="text-center">
                            <div id="totalLiftsValue" class="text-3xl md:text-4xl font-bold text-gray-900 mb-1">0</div>
                            <div class="text-sm text-gray-600 font-medium">Lifts</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Resorts Grid -->
    <section class="px-6 sm:px-8 py-12">
        <div class="max-w-7xl mx-auto">
            <!-- Results Count -->
            <div class="mb-6">
                <p id="resultsCount" class="text-gray-600">
                    Loading Maryland resorts...
                </p>
            </div>
            
            <!-- Loading State -->
            <div id="loadingState" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="resort-card bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <div class="h-48 bg-gradient-to-br from-blue-100 to-blue-200 animate-pulse"></div>
                    <div class="p-6">
                        <div class="h-6 bg-gray-200 rounded w-3/4 mb-2 animate-pulse"></div>
                        <div class="h-4 bg-gray-200 rounded w-1/2 mb-4 animate-pulse"></div>
                        <div class="h-4 bg-gray-200 rounded w-full mb-2 animate-pulse"></div>
                        <div class="h-4 bg-gray-200 rounded w-2/3 animate-pulse"></div>
                    </div>
                </div>
            </div>
            
            <!-- Resorts Grid -->
            <div id="resortsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
                <!-- Resort cards will be loaded here -->
            </div>
            
            <!-- Empty State -->
            <div id="emptyState" class="text-center py-16 hidden">
                <svg class="w-24 h-24 text-gray-300 mx-auto mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">No Maryland resorts found</h3>
                <p class="text-gray-600 mb-6">Check back soon for more Maryland ski resorts</p>
                <a href="resorts.html" class="inline-block px-6 py-3 bg-[var(--accent-blue)] text-white rounded-full font-medium hover:opacity-90 transition-opacity">
                    Browse All Resorts
                </a>
            </div>
            
            <!-- Info Section -->
            <div class="mt-16 bg-blue-50 border border-blue-200 rounded-xl p-8">
                <h2 class="text-2xl font-semibold text-gray-900 mb-4">About Skiing in Maryland</h2>
                <p class="text-gray-700 leading-relaxed mb-4">
                    Maryland may be small, but it offers a unique skiing experience for residents of the Baltimore and Washington, D.C. metropolitan areas. 
                    The state's primary ski destination is located in the western mountains near Deep Creek Lake, providing convenient access to winter sports 
                    without traveling far from the major East Coast cities.
                </p>
                <p class="text-gray-700 leading-relaxed">
                    While Maryland has limited ski resort options, nearby states like Pennsylvania and West Virginia offer additional skiing opportunities 
                    within a few hours' drive. Many Maryland skiers also take advantage of the proximity to larger resorts in Pennsylvania, West Virginia, 
                    and Virginia for extended ski trips.
                </p>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="py-12 px-6 sm:px-8 border-t border-gray-200 bg-white">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm text-gray-600 mb-4 md:mb-0">
                    Â© 2025 <span class="bg-[var(--accent-blue)] text-white px-1">SNO</span><span class="text-[var(--accent-blue)]">GRUB</span>. All rights reserved.
                </p>
                <div class="flex space-x-6">
                    <a href="#" class="text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200">About</a>
                    <a href="#" class="text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200">Contact</a>
                    <a href="#" class="text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200">Privacy</a>
                    <a href="#" class="text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200">Terms</a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Load Universal Resort Card Component -->
    <script src="js/resort-card-universal.js"></script>
    <!-- Load data.js -->
    <script src="data.js"></script>
    
    <script>
        let marylandResorts = [];
        
        // Load Maryland resorts from data
        function loadMarylandResorts() {
            if (typeof skiEatsData !== 'undefined' && skiEatsData.resorts) {
                // Filter for Maryland resorts
                marylandResorts = skiEatsData.resorts.filter(resort => {
                    const location = resort.location || '';
                    return location.includes('Maryland') || location.includes('MD');
                });
                
                // Update hero stats
                updateHeroStats(marylandResorts);
                
                // Render resorts
                renderResorts();
                
                // Hide loading state
                document.getElementById('loadingState').classList.add('hidden');
                
                if (marylandResorts.length > 0) {
                    document.getElementById('resortsGrid').classList.remove('hidden');
                } else {
                    document.getElementById('emptyState').classList.remove('hidden');
                }
            } else {
                console.error('Resort data not found');
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('emptyState').classList.remove('hidden');
            }
        }
        
        // Update hero stats with aggregated data
        function updateHeroStats(resorts) {
            const totalResorts = resorts.length;
            const totalRestaurants = resorts.reduce((sum, r) => sum + (r.restaurantCount || 0), 0);
            const totalAcres = resorts.reduce((sum, r) => sum + (r.terrain?.skiableAcres || 0), 0);
            const totalLifts = resorts.reduce((sum, r) => sum + (r.terrain?.lifts || 0), 0);
            
            // Animate counting up
            animateValue('totalResortsValue', 0, totalResorts, 800);
            animateValue('totalRestaurantsValue', 0, totalRestaurants, 1000);
            animateValue('totalAcresValue', 0, totalAcres, 1200);
            animateValue('totalLiftsValue', 0, totalLifts, 1000);
        }
        
        // Animate number counting up
        function animateValue(elementId, start, end, duration) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const range = end - start;
            const increment = end > start ? 1 : -1;
            const stepTime = Math.abs(Math.floor(duration / range));
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    element.textContent = formatNumber(end);
                    clearInterval(timer);
                } else {
                    element.textContent = formatNumber(current);
                }
            }, stepTime);
        }
        
        // Format number with commas
        function formatNumber(num) {
            return num.toLocaleString();
        }
        
        // Global function to toggle favorites (used by resort card component)
        window.toggleResortFavorite = window.toggleResortFavorite || function(resortId, resortName, event) {
            if (event) {
                event.stopPropagation();
                event.preventDefault();
            }
            
            try {
                const favorites = JSON.parse(localStorage.getItem('snogrub_favorites') || '[]');
                const existingIndex = favorites.findIndex(fav => fav.id === resortId && fav.type === 'resort');
                
                let isFavorited = false;
                if (existingIndex >= 0) {
                    favorites.splice(existingIndex, 1);
                    isFavorited = false;
                } else {
                    favorites.push({
                        id: resortId,
                        type: 'resort',
                        name: resortName,
                        addedAt: new Date().toISOString()
                    });
                    isFavorited = true;
                }
                localStorage.setItem('snogrub_favorites', JSON.stringify(favorites));
                
                const button = event?.target?.closest('.favorite-button');
                if (button) {
                    button.setAttribute('aria-checked', isFavorited ? 'true' : 'false');
                    if (isFavorited) {
                        button.classList.add('favorited');
                    } else {
                        button.classList.remove('favorited');
                    }
                    const icon = button.querySelector('svg');
                    if (icon) {
                        if (isFavorited) {
                            icon.classList.add('fill-red-500', 'text-red-500');
                            icon.classList.remove('fill-none', 'text-gray-400');
                            icon.setAttribute('fill', 'currentColor');
                        } else {
                            icon.classList.remove('fill-red-500', 'text-red-500');
                            icon.classList.add('fill-none', 'text-gray-400');
                            icon.setAttribute('fill', 'none');
                        }
                    }
                }
                
                window.dispatchEvent(new CustomEvent('favoritesChanged', {
                    detail: { resortId, favorited: isFavorited }
                }));
            } catch (e) {
                console.error('Error toggling favorite:', e);
            }
        };
        
        // Initialize Universal Resort Card component
        let marylandResortCard;
        if (typeof UniversalResortCard !== 'undefined') {
            marylandResortCard = new UniversalResortCard({
                showLogo: true,
                showTrailMap: true,
                showStats: true,
                showRating: true,
                showPriceRating: true,
                showFeaturedBadge: true,
                showDistance: false, // Maryland page doesn't show distance
                showQuickView: false,
                showHoverOverlay: true,
                imageHeight: 'h-48',
                cardVariant: 'default',
                showInlineLogo: false,
                clickable: true,
                hoverEffect: true,
                animation: true
            });
        }
        
        // Render resort cards
        function renderResorts() {
            const grid = document.getElementById('resortsGrid');
            const emptyState = document.getElementById('emptyState');
            const resultsCount = document.getElementById('resultsCount');
            
            if (marylandResorts.length === 0) {
                grid.classList.add('hidden');
                emptyState.classList.remove('hidden');
                resultsCount.textContent = 'No Maryland resorts found';
                return;
            }
            
            grid.classList.remove('hidden');
            emptyState.classList.add('hidden');
            resultsCount.textContent = `${marylandResorts.length} resort${marylandResorts.length !== 1 ? 's' : ''} in Maryland`;
            
            // Use UniversalResortCard if available
            if (marylandResortCard && typeof marylandResortCard.renderMultiple === 'function') {
                grid.innerHTML = marylandResortCard.renderMultiple(marylandResorts);
                // Load logos if function exists
                if (typeof loadResortLogos === 'function') {
                    loadResortLogos(marylandResorts);
                }
                if (typeof initializePriceRatings === 'function') {
                    initializePriceRatings();
                }
                return;
            }
            
            // Fallback to old rendering
            grid.innerHTML = marylandResorts.map(resort => {
                const imageUrl = resort.image || '';
                const hasImage = imageUrl && !imageUrl.includes('placeholder');
                
                // Format terrain stats
                const skiableAcres = resort.terrain?.skiableAcres ? resort.terrain.skiableAcres.toLocaleString() : 'N/A';
                const verticalDrop = resort.terrain?.verticalDrop ? `${resort.terrain.verticalDrop.toLocaleString()} ft` : 'N/A';
                const restaurantCount = resort.restaurantCount || 0;
                
                return `
                    <div class="resort-card bg-white border border-gray-200 rounded-lg overflow-hidden">
                        <a href="resort-detail.html?id=${resort.id}" class="block">
                            <div class="relative h-48 bg-gradient-to-br from-blue-100 to-blue-200 overflow-hidden">
                                ${hasImage ? 
                                    `<img src="${imageUrl}" alt="${resort.name}" class="w-full h-full object-cover">` :
                                    `<div class="w-full h-full flex items-center justify-center">
                                        <svg class="w-20 h-20 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                        </svg>
                                    </div>`
                                }
                                ${resort.featured ? 
                                    `<div class="absolute top-3 right-3 px-3 py-1 bg-[var(--accent-blue)] text-white text-xs font-semibold rounded-full">
                                        Featured
                                    </div>` : ''
                                }
                            </div>
                            <div class="p-6">
                                <h3 class="text-xl font-semibold text-gray-900 mb-2">${resort.name}</h3>
                                <p class="text-gray-600 mb-4 flex items-center gap-1">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    ${resort.location || 'Location not specified'}
                                </p>
                                <div class="space-y-2 mb-4 text-sm text-gray-600">
                                    <div class="flex items-center justify-between">
                                        <span class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-[var(--accent-blue)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                            </svg>
                                            Dining Options
                                        </span>
                                        <span class="font-semibold text-gray-900">${restaurantCount}</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-[var(--accent-blue)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
                                            </svg>
                                            Terrain
                                        </span>
                                        <span class="font-semibold text-gray-900">${skiableAcres} acres</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-[var(--accent-blue)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                            </svg>
                                            Vertical Drop
                                        </span>
                                        <span class="font-semibold text-gray-900">${verticalDrop}</span>
                                    </div>
                                </div>
                                <div class="pt-4 border-t border-gray-200">
                                    <span class="text-[var(--accent-blue)] font-medium text-sm flex items-center gap-2">
                                        View Resort
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        </a>
                    </div>
                `;
            }).join('');
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            loadMarylandResorts();
            
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobileMenuButton');
            const mobileMenu = document.getElementById('mobileMenu');
            const menuIcon = document.getElementById('menuIcon');
            const closeIcon = document.getElementById('closeIcon');
            
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                    menuIcon.classList.toggle('hidden');
                    closeIcon.classList.toggle('hidden');
                });
            }
            
            // Close mobile menu when clicking a link
            if (mobileMenu) {
                mobileMenu.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        mobileMenu.classList.add('hidden');
                        menuIcon.classList.remove('hidden');
                        closeIcon.classList.add('hidden');
                    });
                });
            }
        });
    </script>
</body>
</html>
